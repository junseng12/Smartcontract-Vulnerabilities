// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "hardhat/console.sol";

contract Victim {
    address public owner;

    constructor() {
        owner = msg.sender;
    }

    function delegateSet(address _lib, bytes memory _data) public {
        //📌 중요: 이 delegatecall은 특정 라이브러리에서 가져오는 것이 아님 -> EVM 내장 opcode DELEGATECALL을 직접 호출한 거야.
        // >> Solidity에서 제공하는 delegatecall은 저수준 함수(low-level function)야.
        console.log("Victim's msg.sender :", msg.sender);
        (bool success, ) = _lib.delegatecall(_data);
        
        require(success, "Delegatecall failed");
    }
}